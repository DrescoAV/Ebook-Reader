# OpenBook Reader  
**Autor:** Andrei-Valerian Andreescu  
**Grupa:** 335CC  

## Diagrama bloc

![Block Diagram](./Images/Diagrama.png)

---

## Bill Of  Materials (BOM)
| Component Name                            | Link                                                                                                   | Datasheet Link                                                                                           |
|------------------------------------------|-------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|
| 112ATAARR03ATTEND                        | [Link](https://store.comet.srl.ro/Catalogue/Product/43497/)                                                 | [Link](https://www.attend.com.tw/data/download/file/112A-TAAR-R03.rar)                                   |
| ADAFRUIT_CHIP-LED0603                    | [Link](https://www.snapeda.com/parts/KP-1608SURCK/Kingbright/view-part/?ref=search&t=LED%200603)            | [Link](https://www.snapeda.com/parts/KP-1608SURCK/Kingbright/datasheet/)                                 |
| CAPCP3225X100N                           | [Link](https://www.snapeda.com/parts/CPH3225A/Seiko+Instruments/view-part/?ref=eda)                         | [Link](https://www.snapeda.com/parts/CPH3225A/Seiko%20Instruments/datasheet/)                            |
| DIOC1608X36N                             | [Link](https://www.snapeda.com/parts/PGB1010603MR/Littelfuse/view-part/?ref=eda)                            | [Link](https://www.snapeda.com/parts/PGB1010603MR/Littelfuse%20Inc./datasheet/)                          |
| EAGLE-LTSPICE_C0402                      | [Link](https://componentsearchengine.com/part-view/CC0402MRX5R5BB106/YAGEO)                                 | [Link](https://componentsearchengine.com/Datasheets/2/CC0402MRX5R5BB106.pdf)                              |
| ESP32_WROVER_AVX---SD0805S020S1R0_AVX_0  | [Link](https://ro.mouser.com/ProductDetail/KYOCERA-AVX/SD0805S020S1R0?qs=jCA%252BPfw4LHbpkAoSnwrdjw%3D%3D)  | [Link](https://ro.mouser.com/datasheet/2/40/schottky-3165252.pdf)                                        |
| ESP32_WROVER_BME680_PSON80P300X300X100-8N| [Link](https://www.snapeda.com/parts/BME680/Bosch/view-part/?welcome=home)                                  | [Link](https://www.snapeda.com/parts/BME680/Bosch%20Sensortec/datasheet/)                                |
| ESP32_WROVER_EAGLE-LTSPICE_C0402         | [Link](https://componentsearchengine.com/part-view/CC0402MRX5R5BB106/YAGEO)                                 | [Link](https://componentsearchengine.com/Datasheets/2/CC0402MRX5R5BB106.pdf)                              |
| ESP32_WROVER_EAGLE-LTSPICE_R0402         | [Link](https://componentsearchengine.com/part-view/R0402%201%25%20100%20K%20(RC0402FR-07100KL)/YAGEO)       | [Link](https://www.yageo.com/upload/media/product/products/datasheet/rchip/PYu-RC_Group_51_RoHS_L_12.pdf)|
| ESP32_WROVER_SPARKFUN-DISCRETESEMI_SOT23-3| [Link](https://componentsearchengine.com/part-view/DMG2305UX-7/Diodes%20Incorporated)                      | [Link](https://www.diodes.com//assets/Datasheets/DMG2305UX.pdf)                                          |
| ESP32_WROVER_SPARKFUN-IC-POWER_SOT23-5   | [Link](https://ro.mouser.com/ProductDetail/Microchip-Technology/MCP73831T-5ACI-OT?qs=hH%252BOa0VZEiAcgAcEkuamXg%3D%3D) | [Link](https://ro.mouser.com/datasheet/2/268/MCP73831_Family_Data_Sheet_DS20001984H-3441711.pdf)         |
| ESP32C6_VARISTOR_CT/CN1812               | [Link](https://ro.mouser.com/ProductDetail/EPCOS-TDK/B72520T0350K062?qs=dEfas%2FXlABIszF52uu7vrg%3D%3D)     | [Link](https://www.tdk-electronics.tdk.com/inf/75/db/CTVS_14/Surge_protection_series.pdf)                |
| FH34SRJ24S05SH99                         | [Link](https://ro.mouser.com/ProductDetail/Hirose-Connector/FH34SRJ-24S-0.5SH99?qs=vcbW%252B4%252BSTIpKBl5ap9J8Fw%3D%3D) | [Link](https://ro.mouser.com/datasheet/2/185/FH34SRJ_24S_0_5SH_99__CL0580_1255_6_99_2DDrawing_0-1615044.pdf)|
| IND_4828-WE-TPC_WRE                      | [Link](https://ro.mouser.com/ProductDetail/Wurth-Elektronik/744043680?qs=PGXP4M47uW6VkZq%252BkzjrHA%3D%3D)  | [Link](https://www.we-online.com/components/products/datasheet/744043680.pdf)                            |
| JST04_1MM_RA                             | [Link](https://ro.mouser.com/ProductDetail/Adafruit/4208?qs=PzGy0jfpSMtbScLbr0L5dw%3D%3D)                   | [Link](https://ro.mouser.com/ProductDetail/Adafruit/4208?qs=PzGy0jfpSMtbScLbr0L5dw%3D%3D)                 |
| MYBUTTON                                 | [Link](https://industry.panasonic.com/global/en/products/control/switch/light-touch/number/evqpuj02k)       | [Link](https://industry.panasonic.com/global/en/downloads?tab=catalog&small_g_cd=203&part_no=EVQPUJ02K)  |
| RCL_CT3528                               | [Link](https://www.snapeda.com/parts/TAJB475K025RNJ/AVX/view-part/?t=capacitor%203528&con_ref=None)         | [Link](https://www.snapeda.com/parts/TAJB475K025RNJ/AVX/datasheet/)                                      |
| SAMACSYS_PARTS_USB4110GFA                | [Link](https://componentsearchengine.com/part-view/USB4110-GF-A/GCT%20(GLOBAL%20CONNECTOR%20TECHNOLOGY))    | [Link](https://gct.co/files/drawings/usb4110.pdf)                                                         |
| SOD3716X135N                             | [Link](https://ro.mouser.com/ProductDetail/KYOCERA-AVX/SD0805S020S1R0?qs=jCA%252BPfw4LHbpkAoSnwrdjw%3D%3D)  | [Link](https://ro.mouser.com/datasheet/2/40/schottky-3165252.pdf)                                        |
| SOIC127P1032X265-16N                     | [Link](https://eu.mouser.com/ProductDetail/Wurth-Elektronik/744043680?qs=PGXP4M47uW6VkZq%252BkzjrHA%3D%3D)  | [Link](https://www.snapeda.com/parts/DS3231SN%23/Analog%20Devices/datasheet/)                            |
| SON127P600X800X80-9N                     | [Link](https://www.snapeda.com/parts/W25Q512JVEIQ/Winbond+Electronics/view-part/?ref=eda)                   | [Link](https://www.snapeda.com/parts/W25Q512JVEIQ/Winbond%20Electronics/datasheet/)                      |
| SON50P200X200X80-9N                      | [Link](https://www.snapeda.com/parts/MAX17048G+T10/Analog+Devices/view-part/?ref=eda)                       | [Link](https://www.snapeda.com/parts/MAX17048G+T10/Analog%20Devices/datasheet/)                          |
| SOT65P210X110-3N                         | [Link](https://componentsearchengine.com/part-view/SI1308EDL-T1-GE3/Vishay)                                 | [Link](https://componentsearchengine.com/Datasheets/1/SI1308EDL-T1-GE3.pdf)                               |
| SOT95P280X125-5N                         | [Link](https://componentsearchengine.com/part-view/BD5229G-TR/ROHM%20Semiconductor)                         | [Link](https://datasheet.datasheetarchive.com/originals/distributors/Datasheets_SAMA/f2b9741ef86007909f138d561a359946.pdf) |
| SOT95P280X145-6N                         | [Link](https://www.snapeda.com/parts/USBLC6-2SC6Y/STMicroelectronics/view-part/?ref=eda)                    | [Link](https://www.snapeda.com/parts/USBLC6-2SC6Y/STMicroelectronics/datasheet/)                         |
| XCVR_ESP32-C6-WROOM-1-N8                 | [Link](https://www.snapeda.com/parts/ESP32-C6-WROOM-1-N8/Espressif+Systems/view-part/?ref=eda)              | [Link](https://www.snapeda.com/parts/ESP32-C6-WROOM-1-N8/Espressif%20Systems/datasheet/)                 |
| Screen                                   | [Link](https://grabcad.com/library/7-5in-e-ink-display-assortment-1)                                        | [Link](https://grabcad.com/library/7-5in-e-ink-display-assortment-1)                                     |
| Battery                                  | Custom Made Model                                                                                           | [Link](https://www.tme.eu/Document/e0683d8c34e6d878124489f71bffb6ee/cel0014.pdf)                          |
| Case                                     | [Download](https://ocw.cs.pub.ro/courses/_media/tsc/openbook_enclosure.zip)                                 | Not Provided                                                                                             |

---

# Descriere detaliata a functionalitatii hardware

### Componente si interfete

Proiectul utilizeaza urmatoarele componente principale:

- **ESP32-C6 WROOM**: Microcontroller principal ce gestioneaza comunicarea, procesarea datelor si interfatarea tuturor componentelor.
- **Display E-Ink Waveshare 1.5”**: Se conecteaza prin interfata SPI la ESP32, afisand informatii precum ora, data, temperatura si alte notificari.
- **SD Card Reader**: Conectat prin SPI pentru stocarea si accesarea datelor suplimentare.
- **USB-C & Charger MCP73832**: Gestioneaza incarcarea bateriei LiPo si furnizeaza alimentare stabila catre sistem.
- **Baterie LiPo**: Alimentare portabila pentru intregul sistem.
- **Senzor BME688**: Conectat prin I2C, monitorizeaza temperatura, umiditatea si calitatea aerului.
- **RTC DS3231SN**: Conectat prin I2C, mentine timpul real si data exacta chiar si fara alimentare principala.
- **Butoane GPIO**: Reset, Boot si Change pentru diverse functii si moduri operationale ale ESP32.

### Specificatii de comunicatie

- **SPI**: Utilizata pentru Display-ul E-Ink si modulul SD Card.
- **I2C**: Pentru senzorul BME688 si RTC DS3231SN.
- **GPIO**: Pentru butoane si semnale auxiliare (reset, boot).
- **USB**: Conexiune USB-C pentru incarcare si eventuala comunicare de date cu PC-ul.

### Calcul energie

- ESP32-C6: Consum activ aproximativ 100-160 mA la 3.3V
- Display E-Ink: Consum in timpul actualizarii ~15 mA, consum aproape zero in idle.
- Senzor BME688: Consum mediu 0.9 mA
- RTC DS3231SN: Consum mediu 0.2 mA
- Modul incarcare MCP73832 si circuite auxiliare: consum variabil in functie de incarcarea bateriei.

Total mediu estimat in functionare normala: ~150-200 mA la 3.3V (in actualizare), consum idle redus considerabil.

---

## Detaliere pini ESP32-C6

| Pin ESP32-C6 | Nume în schemă       | Funcție hardware          | Motivare / Utilizare                                                |
|--------------|----------------------|---------------------------|----------------------------------------------------------------------|
| GPIO0        | -                    | -                         | Nu este conectat.                                                   |
| GPIO1        | -                    | -                         | Nu este conectat.                                                   |
| GPIO2        | -                    | -                         | Nu este conectat.                                                   |
| GPIO3        | RESET                | Reset                     | Reset hardware pentru repornirea rapidă a sistemului.               |
| GPIO4        | SS_SD                | SPI CS (SD card)          | Selectează SD card-ul pentru comunicație SPI.                       |
| GPIO5        | EPD_DC               | SPI DC (Display)          | Control între date și comandă pentru e-paper display.               |
| GPIO6        | SCK                  | SPI CLK (comun)           | Semnal de ceas SPI pentru display și SD card.                       |
| GPIO7        | MOSI                 | SPI MOSI (comun)          | Trimite date către display și SD card.                              |
| GPIO8        | IO/BOOT (cu buton)   | Boot / GPIO               | Buton de boot pentru programare firmware.                           |
| GPIO9        | -                    | -                         | Nu este conectat.                                                   |
| GPIO10       | EPD_CS               | SPI CS (Display)          | Selectează e-paper display-ul pentru comunicație SPI.               |
| GPIO11       | FLASH_CS             | SPI CS (Flash)            | Selectează memoria flash externă.                                   |
| GPIO12       | USB_D-               | USB                       | Linie de date USB.                                                  |
| GPIO13       | USB_D+               | USB                       | Linie de date USB.                                                  |
| GPIO14       | IO/CHANGE            | GPIO                      | Buton pentru interacțiune utilizator (schimbare mod, etc).          |
| GPIO15       | RXD (implicit)       | UART RX                   | Recepție date serială.                                              |
| GPIO16       | TXD (implicit)       | UART TX                   | Transmisie date serială.                                            |
| GPIO17       | -                    | -                         | Nu este conectat.                                                   |
| GPIO18       | RTC_RST              | Reset RTC                 | Resetare modul RTC extern.                                          |
| GPIO19       | I2C_PW               | Alimentare I2C            | Control alimentare pentru senzori I2C.                              |
| GPIO20       | EPD_3V3_C            | Alimentare Display        | Activează alimentarea e-paper display-ului.                         |
| GPIO21       | SDA                  | I2C SDA                   | Comunicare I2C pentru senzori (ex. BME688, RTC).                    |
| GPIO22       | SCL                  | I2C SCL                   | Semnal de ceas pentru magistrala I2C.                               |
| GPIO23       | EPD_RST              | Reset Display             | Reset e-paper display.                                              |


---

## Imagini relevante

- Imagini relevante:

  - **PCB Randare**: ![PCB](./Images/PCB.jpg)
  - **Carcasa si PCB (fara capac si baterie)**: ![Carcasa si PCB](./Images/VIEW_WITHOUT_LID_AND_BATTERY.jpg)
  - **Display frontal**: ![Display frontal](./Images/SCREEN.png)
  - **Vedere carcasa din fata**: ![Carcasa fata](./Images/TOP.png)
  - **Carcasa deschisa**: ![Carcasa deschisa](./Images/TOP_WITHOUT_LID.png) 
